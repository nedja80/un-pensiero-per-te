<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auguri Speciali âœ¨ðŸ˜º</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <style>
        * { box-sizing: border-box; }

        body {
            margin: 0;
            overflow: hidden;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
            background: radial-gradient(circle at top, #ffe9f7 0%, #ffb3d9 40%, #ff7fa3 100%);
            height: 100vh;
        }

        #click-area {
            position: fixed;
            inset: 0;
        }

        h1 {
            position: absolute;
            top: 7%;
            width: 100%;
            text-align: center;
            color: #ffffff;
            font-weight: 700;
            font-size: clamp(1.8rem, 5vw, 3rem);
            text-shadow:
                0 0 10px rgba(255,255,255,0.9),
                0 0 25px rgba(255,105,180,0.8);
            pointer-events: none;
        }

        .subtitle {
            position: absolute;
            top: 17%;
            width: 100%;
            text-align: center;
            color: #fffafc;
            font-size: clamp(1rem, 3vw, 1.4rem);
            text-shadow: 0 0 8px rgba(0,0,0,0.2);
            pointer-events: none;
            padding: 0 1rem;
        }

        .cat-wrapper {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #cat {
            width: min(180px, 40vw);
            max-width: 220px;
            border-radius: 40%;
            box-shadow:
                0 0 10px rgba(255,255,255,0.9),
                0 0 30px rgba(255,155,200,0.9);
            cursor: pointer;
            transition: transform 0.2s ease-out;
        }

        #cat:active { transform: scale(1.05); }

        .cat-halo {
            position: absolute;
            width: 130%;
            height: 130%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.7), rgba(255,255,255,0));
            filter: blur(2px);
            pointer-events: none;
        }

        .ball {
            position: absolute;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: radial-gradient(circle, #ffffff, #ffe066, #ff9d00);
            box-shadow:
                0 0 10px #fff,
                0 0 25px #ffe066,
                0 0 45px #ff9d00;
            pointer-events: none;
        }

        .explosion {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: radial-gradient(circle,
                rgba(255,255,255,1),
                rgba(255,192,203,0.6),
                rgba(255,192,203,0));
            opacity: 0.9;
            pointer-events: none;
        }

        .flower {
            position: absolute;
            width: 70px;
            height: 70px;
            filter: drop-shadow(0 0 8px rgba(255,255,255,0.9));
            pointer-events: none;
        }

        .message {
            position: absolute;
            color: #ffffff;
            font-weight: 700;
            font-size: clamp(1.4rem, 4.5vw, 2.2rem);
            text-align: center;
            text-shadow:
                0 0 8px rgba(255,255,255,1),
                0 0 20px rgba(255,105,180,0.9);
            opacity: 0;
            pointer-events: none;
        }

        .tap-hint {
            position: absolute;
            bottom: 4%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 0.4rem;
            color: #fff;
            font-size: clamp(0.9rem, 2.8vw, 1.2rem);
            opacity: 0.8;
            animation: pulse 1.5s infinite;
            pointer-events: none;
        }

        .tap-icon { font-size: 1.4em; }

        @keyframes pulse {
            0%   { transform: translateX(-50%) scale(1);   opacity: 0.4; }
            50%  { transform: translateX(-50%) scale(1.08); opacity: 1; }
            100% { transform: translateX(-50%) scale(1);   opacity: 0.4; }
        }
    </style>
</head>
<body>

    <!-- Suoni delicati -->
    <audio id="clickSound"
           src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_3e1f6c0ce4.mp3?filename=magic-flash-6104.mp3"
           preload="auto"></audio>

    <audio id="purrSound"
           src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_7f410e9d46.mp3?filename=cat-purr-6106.mp3"
           preload="auto"></audio>

    <audio id="bgMusic"
           src="https://cdn.pixabay.com/download/audio/2021/10/26/audio_0c0fb1921f.mp3?filename=soft-ambient-110241.mp3"
           preload="auto"
           loop></audio>

    <div id="click-area">
        <h1>Auguri Speciali âœ¨</h1>
        <p class="subtitle">Porta un sorriso a chi vuoiâ€¦ tocca lo schermo o accarezza il gattino.</p>

        <div class="cat-wrapper">
            <div class="cat-halo"></div>
            <img id="cat"
                 src="https://cdn-icons-png.flaticon.com/512/220/220236.png"
                 alt="Gattino dolce">
        </div>

        <div class="tap-hint">
            <span class="tap-icon">ðŸ‘†</span>
            <span>tocca per iniziare</span>
        </div>
    </div>

    <script>
        const clickArea = document.getElementById("click-area");
        const cat = document.getElementById("cat");
        const clickSound = document.getElementById("clickSound");
        const purrSound = document.getElementById("purrSound");
        const bgMusic = document.getElementById("bgMusic");

        clickSound.volume = 0.4;
        purrSound.volume  = 0.5;
        bgMusic.volume    = 0.25;

        function ensureMusic() {
            if (bgMusic.paused) {
                bgMusic.play().catch(() => {});
            }
        }

        clickArea.addEventListener("click", function (event) {
            if (event.target === cat) return;
            ensureMusic();
            launchBall(event.clientX, event.clientY);
        });

        cat.addEventListener("click", function (event) {
            event.stopPropagation();
            ensureMusic();

            const rect = cat.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            anime({
                targets: cat,
                scale: [1, 1.08, 1],
                duration: 800,
                easing: "easeInOutQuad"
            });

            if (!purrSound.paused) purrSound.currentTime = 0;
            purrSound.play();

            explosionAt(centerX, centerY);
            flowersAt(centerX, centerY);
            showMessage(centerX, centerY, "Un sorriso per te ðŸ˜ºðŸŒ¸");
        });

        function launchBall(endX, endY) {
            if (!clickSound.paused) clickSound.currentTime = 0;
            clickSound.play();

            const ball = document.createElement("div");
            ball.classList.add("ball");
            document.body.appendChild(ball);

            const startX = window.innerWidth / 2;
            const startY = window.innerHeight + 30;

            ball.style.left = startX + "px";
            ball.style.top  = startY + "px";

            anime({
                targets: ball,
                left: endX,
                top: endY,
                duration: 1100,
                easing: "easeOutQuad",
                complete: () => {
                    ball.remove();
                    explosionAt(endX, endY);
                    flowersAt(endX, endY);
                    showMessage(endX, endY, "Auguri di cuore ðŸ’–");
                }
            });
        }

        function explosionAt(x, y) {
            const boom = document.createElement("div");
            boom.classList.add("explosion");
            boom.style.left = x + "px";
            boom.style.top  = y + "px";
            document.body.appendChild(boom);

            anime({
                targets: boom,
                width:  [20, 250],
                height: [20, 250],
                marginLeft: ["-10px", "-125px"],
                marginTop:  ["-10px", "-125px"],
                opacity: [0.9, 0],
                easing: "easeOutExpo",
                duration: 900,
                complete: () => boom.remove()
            });
        }

        function flowersAt(x, y) {
            const petals = 14;
            for (let i = 0; i < petals; i++) {
                const flower = document.createElement("img");
                flower.src = "https://cdn-icons-png.flaticon.com/512/4822/4822083.png";
                flower.classList.add("flower");
                document.body.appendChild(flower);

                const angle = (Math.PI * 2 * i) / petals + Math.random() * 0.6;
                const distance = 100 + Math.random() * 140;

                const finalX = x + Math.cos(angle) * distance;
                const finalY = y + Math.sin(angle) * distance;

                flower.style.left = x + "px";
                flower.style.top  = y + "px";

                anime({
                    targets: flower,
                    left: finalX,
                    top: finalY,
                    opacity: [1, 0],
                    scale: [0.3, 1.1],
                    rotate: Math.random() * 360,
                    easing: "easeOutExpo",
                    duration: 2600,
                    complete: () => flower.remove()
                });
            }
        }

        function showMessage(x, y, text) {
            const msg = document.createElement("div");
            msg.classList.add("message");
            msg.innerHTML = text;

            msg.style.left = (x - 130) + "px";
            msg.style.top  = (y - 70) + "px";

            document.body.appendChild(msg);

            anime({
                targets: msg,
                opacity: [0, 1],
                translateY: [20, -10],
                scale: [0.8, 1.1],
                duration: 1300,
                easing: "easeOutBack",
                complete: () => {
                    anime({
                        targets: msg,
                        opacity: [1, 0],
                        translateY: [-10, -30],
                        duration: 1200,
                        delay: 900,
                        easing: "easeInQuad",
                        complete: () => msg.remove()
                    });
                }
            });
        }
    </script>
</body>
</html>
